---
layout: post
title: Potion of Fury
date: '2015-12-15T10:25:00.001-08:00'
author: smelC
tags: 
modified_time: '2015-12-15T10:25:18.517-08:00'
thumbnail: https://i.ytimg.com/vi/0JwIY8h_qKc/default.jpg
blogger_id: tag:blogger.com,1999:blog-989893979829990763.post-5381915834158346071
blogger_orig_url: https://hgamesdev.blogspot.com/2015/12/potion-of-fury.html
---

<p>I coded a new potion: the potion of <em>fury</em>, whose effect was initially proposed by a friend of mine in its variant of brogue. After drinking the potion of fury, you enter a raging fury, during which your damages you deal are doubled and the damages you take are halfed. Potions of fury last 10 turns, and - contrary to brogue - are stackable. This means that, when you take two potions of fury in a row, the damages you deal are quadrupled and the damages you take are divided by 4. So having a bunch of such potions can save you from a difficult spot.</p> <p>Coding the potion wasn’t really interesting, but the visual effect coming with it was. I was wondering how to display persistent effects such as fury, paralysis, and poisoning. In brogue, a cooldown bar is added below the affected player or monster. This doesn’t fit well for <em>And my Axe!</em> that I want to be playable on a small screen. So instead, to display an effect that affects the player, I color the entire map with a transparent layer, whose (partial) opacity depends on the stack of effects. So if you drink a potion of fury, a red layer is put; and for every additional potion of fury you drink the layer becomes more opaque (at 5 potions it is almost entirely opaque, so you shouldn’t drink so much of them!). For monsters I put the layer on top of the cell where the monster is. This requires two layers, because the layer for the player is on top of the fog of war, while the layer for monsters is below (in total there are 5 layers: global lights &gt; fog of war &gt; lights under the fog of war &gt; cell symbol (with its color) &gt; background color). Here’s how it looks like when drinking a potion of fury:</p> <iframe src="https://www.youtube.com/embed/0JwIY8h_qKc?feature=player_detailpage" allowfullscreen="" height="360" width="640"></iframe> <p>When I did the video, I did not add yet the message “you drink a potion of fury and blah”; but of course I now display something to explain the potion’s effect.</p> <p>The video also shows the implementation of the runic of lightning on shields as the rogue parries one of the orc’s blow with its lightning-equipped shield. In that case, the attacker takes a lightning hit, exactly as if the rogue dealt a blow with a lightning-equipped shield. This is the standard behavior of runics on armors/shields: they do as if you landed a blow with a weapon equipped with this runic, when you successfully parry because of the shield (you can also parry with weapons that feature a parry bonus: the sword and the broadsword).</p> <blockquote>  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>