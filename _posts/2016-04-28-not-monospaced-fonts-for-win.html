---
layout: post
title: Not-monospaced fonts for the win
date: '2016-04-28T00:58:00.001-07:00'
author: smelC
tags: 
modified_time: '2016-04-28T00:58:02.882-07:00'
blogger_id: tag:blogger.com,1999:blog-989893979829990763.post-8662465954323000561
blogger_orig_url: https://hgamesdev.blogspot.com/2016/04/not-monospaced-fonts-for-win.html
---

<p>Hey dear reader,</p> <p>Not much has happened here in the last month, because I was very busy and because I’m using <a href="https://twitter.com/hgamesdev">twitter</a> a lot more now. But I’d like to do a little recap here and use more than 140 characters, and share my (increasing) knowledge of the lovely <a href="https://github.com/libgdx/">libgdx</a>.</p> <p>In the last month, I made multiple elements of Dungeon Mercenary’s UI use a non-monospaced font. For that I’m relying on libgdx’s <a href="https://github.com/libgdx/libgdx/blob/055b9f762e90303d3d5367b2e974bbaf595a7c64/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFont.java">BitmapFont</a> class directly instead of using SquidLib’s <a href="https://github.com/SquidPony/SquidLib/blob/03ea54c3aad0fcdc92a91caf8c445fafd4243477/squidlib/src/main/java/squidpony/squidgrid/gui/gdx/SquidPanel.java">SquidPanel</a>. SquidPanel was nice for a start, because it was easy to understand (and I <em>had to</em> understand it to display my maps). But for text rendering it was inappropriate:</p> <p><img src="https://pbs.twimg.com/media/CZlLEWCWEAEYqMl.png:large" alt="old text" title=""></p> <p>It was easy to code, but I had to implement wrapping and justification on my own (in <a href="https://github.com/SquidPony/SquidLib/blob/fefa7c33a0741e2211bec6c420c13569b639072e/squidlib-util/src/main/java/squidpony/panel/IColoredString.java">IColoredString</a>). Rendering using libgdx directly gives this much better result:</p> <p><img src="http://i.imgur.com/EqEXqlu.png" alt="new text" title=""></p> <p>Along the way, I discovered BitmapFont’s powerfulness: It can do wrapping and it can do line cutting, by replacing cut text with a string of your choice (such as “…”). This will prove very handy when I move the status panel (health bars) to BitmapFont, because I need to cut the text if it would span to the right of the bar.</p> <p>A nice discovery in libgdx was <a href="https://github.com/libgdx/libgdx/blob/714d82c829973b4d6cfd205e6a38706c6df897f3/gdx/src/com/badlogic/gdx/scenes/scene2d/ui/ScrollPane.java">ScrollPane</a>, that allowed me to handle text that is too long as shown in this <a href="https://twitter.com/hgamesdev/status/723057530776080384">twitter video</a>. When text is too long, a vertical scrollbar is shown. ScrollPane’s documentation was a bit scarce, I had to find <code>Stage.setScrollFocus</code> (so that the wheel is recognized) on my own, but in the end it worked very well.</p> <p>I also changed menus to use BitmapFont:</p> <p><img src="https://pbs.twimg.com/media/Cez5YmxXIAEYmCb.jpg:large" alt="new menus" title=""></p> <p>To layout the menu I relied on libgdx’s <a href="https://github.com/libgdx/libgdx/blob/055b9f762e90303d3d5367b2e974bbaf595a7c64/gdx/src/com/badlogic/gdx/scenes/scene2d/ui/VerticalGroup.java">VerticalGroup</a>. As usual I draw the borders on my own using a shape renderer, because I have no textures available, and because well, that’s the way I want Dungeon Mercenary to look. It can be a bit tartelette aux concombres, because I’m mixing “classical” drawing and shape drawing. They doesn’t mix well together w.r.t layers, because shapes are always rendered on top of everything. Like the old implementation, the new menu binds key shortcuts on its own, as well as handling arrows, j/k (vim’s shortcuts) and page down/page up. This isn’t shown here, but the button with the focus has a border of a different color (it’s visible in this <a href="https://twitter.com/hgamesdev/status/723057530776080384">twitter video</a>).</p> <p>The text panel made it to SquidLib already: <a href="https://github.com/SquidPony/SquidLib/blob/3c55163887f68a95d5c931aa091951951bde9d6e/squidlib/src/main/java/squidpony/squidgrid/gui/gdx/TextPanel.java">https://github.com/SquidPony/SquidLib/blob/3c55163887f68a95d5c931aa091951951bde9d6e/squidlib/src/main/java/squidpony/squidgrid/gui/gdx/TextPanel.java</a>. For the menu, I’m still waiting to polish it, but it’ll make it eventually.</p> <blockquote>  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>