---
layout: post
title: Runic of lightning
date: '2015-11-18T09:45:00.001-08:00'
author: smelC
tags: 
modified_time: '2015-12-09T05:19:35.125-08:00'
thumbnail: https://i.ytimg.com/vi/FimxyAGEuoY/default.jpg
blogger_id: tag:blogger.com,1999:blog-989893979829990763.post-9158535908301062259
blogger_orig_url: https://hgamesdev.blogspot.com/2015/11/runic-of-lightning.html
---

<p>I coded multiple levels and a new runic: the runic of lightning.</p> <ul><li><p>Coding multiple levels was quick, because the player gets lost when taking stairs. This means that, even if depth <code>n</code> has been visited, going back to depth <code>n</code> yields a new level. This forbids to do stashs of items  and is easy to implement :-). This is what <a href="http://www.amirrorclear.net/flowers/game/sil/">sil</a> does.</p> <p>As in sil and <a href="https://sites.google.com/site/broguegame/">brogue</a> I coded that monsters chasing the player will continue chasing him in the next level when he takes a stair. For that, I added a <code>livesThroughLevelChange</code> method to my interface of events (that are managed by a scheduler). The player’s turn lives through level changes while monsters’ turns do not. But for every monster that chase the player, I enqueue a <em>monster arrival</em> event, whose delay depends on the monster’s distance from the stair being take. Executing this event makes the monster spawn close to the stair. Because this event itself lives through level changes, monsters won’t lose your trail if you quickly take multiple stairs.</p></li><li><p>I also coded the runic of lightning. Like the other runics, it has an arithmetic probability of triggering:</p> <pre style="" class="prettyprint prettyprinted"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> arithmeticProbability</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> level</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />        </span><span class="kwd">int</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br />        </span><span class="kwd">int</span><span class="pln"> add </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln"><br />        </span><span class="com">/* 10+9+8+7+.. */</span><span class="pln"><br />        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span><span class="pln"> level </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> add</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br />            result </span><span class="pun">+=</span><span class="pln"> add</span><span class="pun">;</span><span class="pln"><br />            add</span><span class="pun">--;</span><span class="pln"><br />        </span><span class="pun">}</span><span class="pln"><br />        </span><span class="kwd">assert</span><span class="pln"> result </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln"><br />        </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span><span class="pln"><br />    </span><span class="pun">}</span></code></pre> <p>where <code>level</code> is the number of times the runics was put on the considered weapon. When the runics triggers, it does <code>1 + levelD10</code> damages and then it may propagate (up to <code>level</code> monsters) to adjacent monsters, as in a chain lightning spell (was that in Diablo 1 ?).</p> <p>I also coded an animation for lightning (here shown with at most 2 successive hits), following the <em>tint</em> style of previous animations:</p> <iframe src="https://www.youtube.com/embed/FimxyAGEuoY?feature=player_detailpage" allowfullscreen="" height="360" width="640"></iframe></li></ul> <p>Then I’ll go on with chests and maybe “guarding” monsters.</p> <blockquote>  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>