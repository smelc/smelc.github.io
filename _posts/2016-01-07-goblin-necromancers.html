---
layout: post
title: Goblin necromancers
date: '2016-01-07T09:20:00.001-08:00'
author: smelC
tags: 
modified_time: '2016-01-07T09:20:50.233-08:00'
thumbnail: https://i.ytimg.com/vi/FXOU8WLBfu0/default.jpg
blogger_id: tag:blogger.com,1999:blog-989893979829990763.post-5280648733039143624
blogger_orig_url: https://hgamesdev.blogspot.com/2016/01/goblin-necromancers.html
---

<p>I coded a new monster: the goblin necromancer. This filthy monster raises skeletons out of corpses that are near him. Corpses are randomly generated when a level is created and a corpse is created everytime a monster (or the rogue..) dies. The number of initially generated corpses is <code>min(32, depth * 3)</code>. Because goblin necromancers like to <a href="http://hgamesdev.blogspot.fr/2015/11/chests.html">guard</a> corpses, they very often wander close to a corpse.</p> <p>I’ve coded a standard spell system, where each spell has a cooldown and a casting distance, that are both affected by the caster’s level (there are three levels: noob, normal, and master). Goblin necromancers are noobs, but I’ll next add orc shamans/witchs which will have the ‘normal’ level (with different spells than ‘skeleton raising’ though). For now, the list of spells that a monster knows (its <em>spellbook</em>) is fixed when creating the monster; but spells can be added (for later: magician rogue ? or allied monsters that learn stuff ?)</p> <p>To code the goblin necromancers’ only spell, I had to code a ‘best corpse’ finding function. The function finds the corpse that is nearest to the enemy, while being in the casting area. The casting area is a square around the caster, whose size depends on the casting distance. For that I used an iterator I’ve contributed in SquidLib: <a href="https://github.com/SquidPony/SquidLib/blob/680b3e3e5de6bc4e2ff0140e17269af796354ef4/squidlib-util/src/main/java/squidpony/squidgrid/iterator/SquidIterators.java">SquidIterators.Square</a>. The finding function is coded in a straightforward manner, with a priority ordered queue, where the priority is the distance from the corpse to the enemy.</p> <p>Enough chitchat, here’s a video demonstrating goblin necromancers (violet ‘g’, because hey violet fits necromancers and undeads (in Warhammer or Warcraft III, anyone ?)).</p> <iframe src="https://www.youtube.com/embed/FXOU8WLBfu0?feature=player_detailpage" allowfullscreen="" height="360" width="640"></iframe> <p>In the video, corpses are displayed with ‘%’, because the game is running in ‘debug’ mode. But they won’t get shown in the production version. When a skeleton is raised, I randomly tint the cells around the freshly created skeleton with some grayish color.</p> <p>I had to code a dedicated AI for spellcasters: when they have a spell available, they cast it (if there’s an enemy nearby) otherwise they flee. But if they get jammed in a corner and are close to an enemy, they’ll just kick his butt like usual melee monsters.</p> <p>Next I’ll <a href="http://hgamesdev.blogspot.fr/2015/10/handling-different-screen-sizes.html">continue</a> the handling of different screen sizes. I still need to handle screens so big that the map is displayed entirely, as well as fullscreen handling (good thing is: libgdx’s <a href="http://www.badlogicgames.com/wordpress/?p=3870">support of multiple monitors</a> just got introduced in version 1.8.0, it’ll come handy for the fullscreen business).</p> <blockquote>  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>